# ğŸ” GraphQLã‚µãƒ¼ãƒãƒ¼ã®å…¨ã‚¹ã‚­ãƒ¼ãƒAPIãƒã‚§ãƒƒã‚¯è‡ªå‹•åŒ–æ§‹æƒ³

## ğŸ¯ ç›®çš„
1. ç‰¹å®šã®ãƒãƒ¼ãƒˆï¼ˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å˜ä½ï¼‰ã®GraphQLã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ã€æä¾›ã•ã‚Œã¦ã„ã‚‹å…¨APIåï¼ˆQuery/Mutationï¼‰ã‚’å–å¾—ã—ãŸã„
2. å–å¾—ã—ãŸAPIã‚’1ã¤ãšã¤å‘¼ã³å‡ºã—ã€200 OKã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ãŸã„

## âœ… å®Ÿç¾å¯èƒ½æ€§ã¨å‰ææ¡ä»¶

|ã‚¹ãƒ†ãƒƒãƒ—|	å®Ÿç¾å¯å¦|	æ¡ä»¶ãƒ»æ³¨æ„|
|---|---|---|
|GraphQLã®å…¨APIåã‚’å–å¾—ã™ã‚‹	|âœ… å¯èƒ½	|Introspection æ©Ÿèƒ½ãŒæœ‰åŠ¹ã§ã‚ã‚‹å¿…è¦ã‚ã‚Š |
|APIã‚’ãƒ«ãƒ¼ãƒ—ã§å®Ÿè¡Œã—ã¦å¿œç­”ã‚’æ¤œæŸ»	|âœ… å¯èƒ½	|å¼•æ•°ãªã—ã®APIã¯å³å®Ÿè¡Œå¯èƒ½ã€å¼•æ•°ã‚ã‚Šã¯ãƒ¢ãƒƒã‚¯ç”ŸæˆãŒå¿…è¦|
|å¿œç­”ã®æˆåŠŸåˆ¤å®š	|âœ… å¯èƒ½	|HTTP 200 ï¼‹ errors ãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ãƒã‚§ãƒƒã‚¯|

## ğŸ§  æŠ€è¡“çš„èƒŒæ™¯
### ğŸ”¹ GraphQL Introspectionã¨ã¯ï¼Ÿ
GraphQLã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ç‰¹åˆ¥ãªã‚¯ã‚¨ãƒªã‚’é€ã‚‹ã“ã¨ã§ã€ã‚¹ã‚­ãƒ¼ãƒå…¨ä½“ï¼ˆå‹æƒ…å ±ãƒ»æ“ä½œåãƒ»å¼•æ•°å‹ãªã©ï¼‰ã‚’å–å¾—ã§ãã‚‹æ¨™æº–ä»•æ§˜ã€‚

### ğŸ”¹ ä»£è¡¨çš„ãªintrospectionã‚¯ã‚¨ãƒª
```graphql
{
  __schema {
    queryType {
      fields {
        name
        args {
          name
          type {
            name
            kind
          }
        }
      }
    }
    mutationType {
      fields {
        name
        args {
          name
          type {
            name
            kind
          }
        }
      }
    }
  }
}
```

## ğŸ› ï¸ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—ã®æµã‚Œ
### â‘  introspectionã§ã‚¹ã‚­ãƒ¼ãƒå–å¾—
â†’ æ“ä½œåã¨å¼•æ•°æ§‹é€ ã‚’å–å¾—

### â‘¡ å¼•æ•°ãªã—ã®APIã¯è‡ªå‹•ç”Ÿæˆã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ
ä¾‹: `query { users }` ãªã©

### â‘¢ å¼•æ•°ã‚ã‚ŠAPIã«ã¯ãƒ¢ãƒƒã‚¯å€¤ã‚’æŠ•å…¥
ä¾‹: `query { user(id: 1) }`

### â‘£ HTTP 200 ã‹ã¤ GraphQLã‚¨ãƒ©ãƒ¼ãªã—ãªã‚‰ OK åˆ¤å®š


## ğŸ§ª Pythonã§ã®åˆ¤å®šä¾‹ï¼ˆç°¡æ˜“ï¼‰
```python
response = requests.post(endpoint, json={"query": query})
if response.status_code == 200 and "errors" not in response.json():
    print("OK")
else:
    print("NG")
```

## âš ï¸ æ³¨æ„ç‚¹
|é …ç›®	| è§£èª¬|
|---|---|
|Introspectionã®æœ‰åŠ¹åŒ–	|æœ¬ç•ªç’°å¢ƒã§ã¯ç„¡åŠ¹ãªã“ã¨ã‚‚å¤šã„ã€‚|
|å¼•æ•°ã‚ã‚Šã‚¯ã‚¨ãƒªã®é›£ã—ã•	|å‹ã”ã¨ã®ãƒ¢ãƒƒã‚¯å€¤ç”ŸæˆãŒå¿…è¦ã€‚|
|å…¥ã‚Œå­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å–å¾—	|__type ã‚¯ã‚¨ãƒªã§æ·±æ˜ã‚Šã™ã‚Œã°å¯¾å¿œå¯èƒ½ã€‚|
|200 OKã§ã‚‚ GraphQLçš„ã«ã‚¨ãƒ©ãƒ¼ãªã“ã¨ãŒã‚ã‚‹	|errors ã‚­ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã¹ãã€‚|

## ğŸ“Š ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant Script as ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    participant GQL as GraphQLã‚µãƒ¼ãƒãƒ¼

    User->>Script: å®Ÿè¡Œï¼ˆmainï¼‰
    Script->>GQL: introspectionã‚¯ã‚¨ãƒªé€ä¿¡
    GQL-->>Script: ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ï¼ˆå…¨ã‚¯ã‚¨ãƒªåã¨å¼•æ•°ï¼‰
    Script->>Script: å¼•æ•°ãªã—ã®APIã‚’æŠ½å‡º
    loop å„APIã”ã¨ã«
        Script->>GQL: ã‚¯ã‚¨ãƒªï¼ˆå¼•æ•°ã‚ã‚Šãªã‚‰ãƒ¢ãƒƒã‚¯å€¤ã¤ãï¼‰
        GQL-->>Script: HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆ200 or ã‚¨ãƒ©ãƒ¼ï¼‰
        Script->>User: ã‚¯ã‚¨ãƒªå: OK / NG
    end
```
